(this["webpackJsonpmy-social-app"]=this["webpackJsonpmy-social-app"]||[]).push([[3],{392:function(t,e,s){"use strict";s.d(e,"a",(function(){return l}));var o=s(8),i=s(86),c=(s(0),s(20)),n=s(16),r=s(1),a=function(t){return{isAuth:t.auth.isAuth}};function l(t){return Object(n.b)(a,{})((function(e){var s=e.isAuth,n=Object(i.a)(e,["isAuth"]);return s?Object(r.jsx)(t,Object(o.a)({},n)):Object(r.jsx)(c.a,{to:"/login"})}))}},393:function(t,e,s){t.exports={descriptionBlock:"ProfileInfo_descriptionBlock__1wlHc",photoLong:"ProfileInfo_photoLong__10eRC",profileInfo:"ProfileInfo_profileInfo__3i1XP",socialList:"ProfileInfo_socialList__PGh5B",socialListItem:"ProfileInfo_socialListItem__SYGfs",socialListItemLink:"ProfileInfo_socialListItemLink__13Sal",userAva:"ProfileInfo_userAva__1o63a",statusBlock:"ProfileInfo_statusBlock__19cVH",downloadingPhotos:"ProfileInfo_downloadingPhotos__16X1y",formControl:"ProfileInfo_formControl__3M5pU",error:"ProfileInfo_error__1I07E",formSummaryError:"ProfileInfo_formSummaryError__3z9wk"}},397:function(t,e,s){t.exports={status:"ProfileStatus_status__7Lnpg"}},398:function(t,e,s){t.exports={postsBlock:"MyPosts_postsBlock__-9L8J",posts:"MyPosts_posts__2hrF-"}},399:function(t,e,s){t.exports={item:"Post_item__6XZw7"}},402:function(t,e,s){"use strict";s.r(e);var o=s(8),i=s(153),c=s(154),n=s(191),r=s(189),a=s(0),l=s.n(a),u=s(151),j=s(393),b=s.n(j),d=s(155),f=s(71),h=s(397),p=s.n(h),O=s(1),m=function(t){var e=Object(a.useState)(!1),s=Object(u.a)(e,2),o=s[0],i=s[1],c=Object(a.useState)(t.status),n=Object(u.a)(c,2),r=n[0],l=n[1];Object(a.useEffect)((function(){l(t.status)}),[t.status]);return Object(O.jsxs)("span",{className:p.a.status,children:[!o&&Object(O.jsxs)("span",{onDoubleClick:function(){i(!0)},children:[t.status||"------"," "]}),o&&Object(O.jsx)("input",{onBlur:function(){i(!1),t.updateStatus(r)},onChange:function(t){l(t.currentTarget.value)},autoFocus:!0,value:r})]})},x=s(53),v=s(188),_=Object(v.a)({form:"edit-profile"})((function(t){var e=t.handleSubmit,s=t.profile,o=t.error;return Object(O.jsxs)("form",{onSubmit:e,children:[Object(O.jsx)("div",{children:Object(O.jsx)("button",{children:"Save"})}),o&&Object(O.jsx)("div",{className:b.a.formSummaryError,children:o}),Object(O.jsx)("div",{className:b.a.descriptionBlock,children:Object(O.jsxs)("div",{className:b.a.profileInfo,children:[Object(O.jsx)("b",{children:"Full name:"})," ",Object(x.c)("full name","fullName",[],x.a),Object(O.jsxs)("ul",{className:b.a.socialList,children:[Object(O.jsxs)("div",{children:[Object(O.jsx)("b",{children:"Looking for a job: "}),Object(x.c)("","lookingForAJob",[],x.a,{type:"checkbox"})]}),Object(O.jsxs)("div",{children:[Object(O.jsx)("b",{children:"My professional skills: "}),Object(x.c)("My professional skills...","lookingForAJobDescription",[],x.b)]}),Object(O.jsxs)("div",{children:[Object(O.jsx)("b",{children:"About me: "}),Object(x.c)("About me...","aboutMe",[],x.b)]}),Object(O.jsxs)("div",{children:[Object(O.jsx)("b",{children:"Contacts:"}),Object.keys(s.contacts).map((function(t){return Object(O.jsx)("div",{className:b.a.socialListItem,children:Object(O.jsxs)("b",{children:[t,": ",Object(x.c)(t,"contacts."+t,[],x.a)]})},t)}))]})]})]})})]})})),P=function(t){var e=t.profile,s=t.isOwner,o=t.goToEditMode;return Object(O.jsxs)("div",{children:[s&&Object(O.jsx)("div",{children:Object(O.jsx)("button",{onClick:o,children:"Edit"})}),Object(O.jsxs)("div",{className:b.a.profileInfo,children:[Object(O.jsx)("p",{children:e.fullName}),Object(O.jsxs)("ul",{className:b.a.socialList,children:[Object(O.jsx)("b",{children:"Contacts:"}),Object.keys(e.contacts).map((function(t){return Object(O.jsx)(g,{contactTitle:t,contactValue:e.contacts[t]},t)})),Object(O.jsxs)("div",{children:[Object(O.jsx)("b",{children:"Looking for a job: "}),e.lookingForAJob?"yes":"no"]}),e.lookingForAJob&&Object(O.jsxs)("div",{children:[Object(O.jsx)("b",{children:"My professional skills: "}),e.lookingForAJobDescription]}),Object(O.jsxs)("div",{children:[Object(O.jsx)("b",{children:"About me: "})," ",e.aboutMe]}),Object(O.jsx)("div",{})]})]})]})},g=function(t){var e=t.contactTitle,s=t.contactValue;return Object(O.jsxs)("li",{className:b.a.socialListItem,children:[e,": ",Object(O.jsxs)("a",{className:b.a.socialListItemLink,href:"#",children:[" ",s||"none"]})]})},k=function(t){var e=t.profile,s=t.status,o=t.updateStatus,i=t.isOwner,c=t.savePhoto,n=t.saveProfile,r=Object(a.useState)(!1),l=Object(u.a)(r,2),j=l[0],h=l[1];return e?Object(O.jsxs)("div",{children:[Object(O.jsx)("div",{children:Object(O.jsx)("img",{className:b.a.photoLong,alt:"none",src:"https://fartuk.ru/upload/resize_cache/iblock/e96/1920_384_1d2c0be91f8b91a0d3c91a9448f348e3c/skinali_prochie_goroda_14218.jpg"})}),Object(O.jsxs)("div",{className:b.a.descriptionBlock,children:[Object(O.jsx)("div",{children:Object(O.jsx)("img",{className:b.a.userAva,src:e.photos.large||d.a,alt:"none"})}),j?Object(O.jsx)(_,{initialValues:e,profile:e,onSubmit:function(t){n(t).then((function(){return h(!1)}))}}):Object(O.jsx)(P,{profile:e,isOwner:i,goToEditMode:function(){return h(!0)}})," "]}),Object(O.jsxs)("div",{className:b.a.statusBlock,children:["STATUS: ",Object(O.jsx)(m,{status:s,updateStatus:o})]}),Object(O.jsx)("div",{className:b.a.downloadingPhotos,children:i&&Object(O.jsx)("input",{type:"file",onChange:function(t){var e;(null===(e=t.target.files)||void 0===e?void 0:e.length)&&c(t.target.files[0])}})})]}):Object(O.jsx)(f.a,{})},I=s(152),S=s(398),y=s.n(S),L=s(399),A=s.n(L),w=function(t){return Object(O.jsxs)("div",{className:A.a.item,children:[Object(O.jsx)("img",{alt:"none",src:"https://store.playstation.com/store/api/chihiro/00_09_000/container/US/en/19/UP2477-CUSA06694_00-AV00000000000017/image?w=320&h=320&bg_color=000000&opacity=100&_version=00_09_000"}),t.message,Object(O.jsx)("div",{children:Object(O.jsxs)("span",{children:[t.countLikes," likes"]})})]})},N=s(72),B=Object(N.a)(10),M=Object(N.b)(3),U=Object(v.a)({form:"ProfileAddNewPostForm"})((function(t){return Object(O.jsxs)("form",{onSubmit:t.handleSubmit,children:[Object(x.c)("new post...","newPostText",[N.c,B,M],x.b),Object(O.jsx)("button",{children:"Add post"})]})})),C=function(t){var e=t.postsData.map((function(t){return Object(O.jsx)(w,{message:t.messages,countLikes:t.countLikes},t.id)}));return Object(O.jsxs)("div",{className:y.a.postsBlock,children:[Object(O.jsx)("h3",{children:"My posts"}),Object(O.jsx)(U,{onSubmit:function(e){t.addPost(e.newPostText)}}),Object(O.jsx)("div",{className:y.a.posts,children:e})]})},E=l.a.memo(C),F=s(16),T=Object(F.b)((function(t){return{postsData:t.profilePage.postsData}}),{addPost:I.a.addPost})(E),D=function(t){return Object(O.jsxs)("div",{children:[Object(O.jsx)(k,{profile:t.profile,status:t.status,updateStatus:t.updateStatus,isOwner:t.isOwner,savePhoto:t.savePhoto,saveProfile:t.saveProfile}),Object(O.jsx)(T,{})]})},J=s(20),z=s(392),V=s(19),X=function(t){Object(n.a)(s,t);var e=Object(r.a)(s);function s(){return Object(i.a)(this,s),e.apply(this,arguments)}return Object(c.a)(s,[{key:"refreshProfile",value:function(){var t=+this.props.match.params.userId;if(t||(t=this.props.authorizedUserId)||this.props.history.push("/login"),!t)throw new Error('Id should exists in URI params or in state("authorizedUserId")');this.props.getUserProfile(t),this.props.getStatus(t)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(t,e){this.props.match.params.userId!==t.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return Object(O.jsx)(D,Object(o.a)(Object(o.a)({},this.props),{},{isOwner:!this.props.match.params.userId,profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus,savePhoto:this.props.savePhoto}))}}]),s}(l.a.Component);e.default=Object(V.d)(Object(F.b)((function(t){return{profile:t.profilePage.profile,status:t.profilePage.status,authorizedUserId:t.auth.userId,isAuth:t.auth.isAuth}}),{getUserProfile:I.d,getStatus:I.c,updateStatus:I.g,savePhoto:I.e,saveProfile:I.f}),J.h,z.a)(X)}}]);
//# sourceMappingURL=3.4c6fa06b.chunk.js.map